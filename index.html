<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Cập nhật tình trạng virut Corona 2019 nCoV, Live update</title>
  <meta name='viewport' content='width=device-width, initial-scale=1.0' />
  
  <meta name="description" content="Cập nhật tình trạng virut Corona 2019 nCoV, Live update" />
  <meta property="og:description" content="Cập nhật tình trạng virut Corona 2019 nCoV, Live update" />
  <meta itemprop="description" content="Cập nhật tình trạng virut Corona 2019 nCoV, Live update">
  <meta name="keywords" content="Cập nhật tình trạng virut Corona 2019 nCoV, Live update" />

  <meta name="author" content="Cualuoidanang.com" />
  <meta name="theme-color" content="#2f9697">
  <meta name="mobile-web-app-capable" content="yes">

  <meta itemprop="name" content="Corona nCoV 2019 Live Update">
  <meta itemprop="image" content="https://ncov.ga/ncov.png">

  <meta property="og:url" content="https://ncov.ga" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Corona nCoV 2019 Live Update" />
  <meta property="og:image" content="https://ncov.ga/ncov.png" />

  <meta name="twitter:title" content="Corona nCoV 2019 Live Update" />
  <meta name="twitter:image" content="https://ncov.ga/ncov.png" />

  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,900,400italic|Open+Sans:400' rel='stylesheet' type='text/css'>
  <link rel="shortcut icon" href="favicon.png">
  
  <link rel='stylesheet' type='text/css' href='style.css'>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12788638-4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-12788638-4');
  </script>

</head>
<body>
  <div class="container">
    <h1 id="logo"><a href="/">Virut Corona nCoV 2019</a></h1>
    <p><em>Cập nhật đến <span id="updatetime">2019/2/6 18:00</span>, tự động cập nhật sau 5 phút.</em></p>

    <div id="chart_div"></div>

    <div id="fullTable" class="row">
      <div class="eight columns">
        <h5>Hiện tại</h5>
      <table class="u-full-width">
        <thead><tr><th>Ngày</th><th>Nhiễm (VN)</th><th>Tử vong (VN)</th><th>Bình phục (VN)</th><th>Nhiễm mới</th></tr></thead>
        <tbody id="world"></tbody>
      </table>
      </div>
      <div class="four columns">
        <h5>Việt Nam</h5>
        <div id="vn-stats">
          <div class="one-half column">Nhiễm<h3 id="vn-n">-</h3></div>
          <div class="one-half column">Tử vong<h3 id="vn-tv">-</h3></div>
        </div>
        <div>
          <iframe height="600" width="100%" frameborder="0" scrolling="no" src="vietnam.html"></iframe>
        </div>
      </div>
    </div>
    
    <div><h5>Tin tức</h5><ul id="feed"></ul></div>
    <hr>
    <footer>
      <div class="footer">
        <div class="row">
          <div class="three columns">
            <h5>Kiến thức</h5>
            <ul>
              <li><a href="https://www.vinmec.com/vi/tin-tuc/thong-tin-suc-khoe/dich-2019-ncov/thong-tin-suc-khoe/thong-tin-day-du-ve-virus-corona-theo-huong-dan-cua-bo-y-te/" target="_blank">Virus
                  corona 2019 là gì?</a></li>
              <li><a href="https://www.vinmec.com/vi/tin-tuc/thong-tin-suc-khoe/suc-khoe-tong-quat/hoi-dap-day-du-ve-dich-virus-corona-2019/" target="_blank">Nguồn
                  gốc của 2019-nCoV</a></li>
              <li><a  href="https://www.vinmec.com/vi/tin-tuc/thong-tin-suc-khoe/suc-khoe-tong-quat/hoi-dap-day-du-ve-dich-virus-corona-2019/" target="_blank">Cơ
                  chế lây lan</a></li>
            </ul>
          </div>
          <div class="three columns">
            <h5>Phòng ngừa</h5>
            <ul>
              <li>Rửa tay thường xuyên</li>
              <li>Đeo khẩu trang</li>
              <li>Tránh nơi đông người</li>
              <li>Tránh tiếp xúc vật nuôi</li>
            </ul>
          </div>
          <div class="three columns">
            <h5>Triệu chứng</h5>
            <ul>
              <li>Sốt</li>
              <li>Ho</li>
              <li>Khó thở</li>
              <li>Ủ bệnh 2-14 ngày</li>
            </ul>
          </div>
          <div class="three columns">
            <h5>Đường dây nóng</h5>
            <ul>
              <li><a href="tel:19009095">1900-9095</a></li>
              <li><a href="tel:19003228">1900-3228</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

  </div>

  <div style="text-align: center;">
    <p>Phát triển bởi Cualuoidanang.com. Dữ liệu: Bộ Y tế, WorldOMeters</p>
  </div>

  <script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    function getData(){
      var URL = "1apbJy54knVUXcKpuerSrgkADdZaGJ05Xh3pqkhHZZsI"
      Tabletop.init({ key: URL, callback: showInfo, simpleSheet: true })
    }
    document.addEventListener('DOMContentLoaded', getData());
    google.charts.load('current', { packages: ['corechart', 'line'] });

    var dt;
    function showInfo(data) {
      if (document.getElementById('updatetime').innerText != data[0]['Cập nhật'])
      {
        dt = data;
        document.getElementById('updatetime').innerText = dt[0]['Cập nhật'];
        drawTable();
        google.charts.setOnLoadCallback(drawAxisTickColors);
      }
    }

    function drawAxisTickColors() {
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Ngày');
      data.addColumn('number', 'Nhiễm');
      data.addColumn({ type: 'number', role: 'annotation' });
      data.addColumn('number', 'Chết');
      data.addColumn({ type: 'number', role: 'annotation' });
      data.addColumn('number', 'Khỏi');
      data.addColumn('number', 'Mới');
      //data.addColumn({type: 'number', role: 'annotation'});
      for (i = 0; i < dt.length; i++) {
        var nn = parseInt(dt[i]['Nghi Nhiễm'])
        var tv = parseInt(dt[i]['Tử vong'])
        var kb = parseInt(dt[i]['Khỏi bệnh'])
        data.addRows([[dt[i]['Ngày'], nn, nn, tv, tv, kb, parseInt(dt[i]['Tăng nhiễm'])]]);
      }


      var options = {
        hAxis: {
          title: null,
          textStyle: {
            color: '#01579b',
            fontSize: 11,
            fontName: 'Arial'
          },
          titleTextStyle: {
            color: '#01579b',
            fontSize: 11,
            fontName: 'Arial',
            bold: false,
            italic: true
          },
          slantedTextAngle: 90
        },
        vAxis: {
          title: 'Người',
          textStyle: {
            color: '#1a237e',
            fontSize: 12,
            bold: false
          },
          titleTextStyle: {
            color: '#1a237e',
            fontSize: 11,
            bold: false,
            italic: false
          },
          format: 'short'
        },
        height: 600,
        annotations: {
          0: { style: 'point' }
        },
        chartArea: { left: 40, top: 10, width: '100%', height: '85%' },
        colors: ['#4285f4', '#ea4335', '#38761d', '#4374e0'],
        legend: { position: 'bottom' },
        series: {
          0: { pointSize: 6, pointShape: 'square', },
          1: { pointSize: 6, pointShape: 'diamond' },
          2: { pointSize: 4, pointShape: 'circle' },
          3: { lineDashStyle: [1, 1] }
        },

      };
      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }

    function drawTable() {
      var html = '';

      for (var i = dt.length - 1; i >= 0; i--) {
        html += '<tr><td>' + dt[i]['Ngày'] + '</td><td>' + dt[i]['Nghi Nhiễm'] + ' (' + dt[i]['Nhiễm'] + ')</td><td>' + dt[i]['Tử vong'] + ' (' + dt[i]['Chết'] + ')</td><td>' + dt[i]['Khỏi bệnh'] + ' (' + dt[i]['Khỏi'] + ')</td><td>' + dt[i]['Tăng nhiễm'] + '</td>' + '</tr>';
      }
      document.getElementById('world').innerHTML = html;
      //Vietnam
      document.getElementById('vn-n').innerText = dt[dt.length - 1]['Nhiễm'];
      document.getElementById('vn-tv').innerText = dt[dt.length - 1]['Chết'];
    }
    setInterval(getData, 60000);
  </script>

  <script src="feednami.js"></script>
  <script type="text/javascript">
  const url = 'https://news.google.com/atom/search?q=corona&hl=vi&gl=VN&ceid=VN:vi'
  //const url = 'https://news.google.com/rss/search?q=corona&hl=vi&gl=VN&ceid=VN:vi';
  const textarea = document.getElementById('feed')
  feednami.load(url)
    .then(feed => {
      html = ''
      for(var i = 0; i < 10; i++){
        var entry = feed.entries[i];
        var day = entry.date.substring(0,10);
        //html += `<li><a href="${entry.link}" target="_blank">${entry.title}</a> <code>${day}</code></li>`
        html += `<li>${entry.description} <code>${entry.date.substring(0,10)}</code></li>`
      }
      //console.log(feed.entries[0]);
      document.getElementById('feed').innerHTML = html;
    })
  </script>
  
</body>
</html>